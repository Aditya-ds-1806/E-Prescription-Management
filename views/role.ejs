<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>Set Role</title>
</head>

<body>
    <section class="container text-center my-auto">
        <h1 class="p-5">I'm a:</h1>
        <button class="btn btn-primary mx-sm-5 mx-1">Doctor</button>
        <button class="btn btn-primary mx-sm-5 mx-1">Pharmacist</button>
        <button class="btn btn-primary mx-sm-5 mx-1">Patient</button>
    </section>

    <script>
        var buttons = document.querySelectorAll('button');
        for (const button of buttons) {
            button.addEventListener('click', async () => {
                var res = await fetch('/role', {
                    method: 'POST',
                    body: JSON.stringify({
                        role: button.textContent.toLowerCase()
                    }),
                    headers: { "Content-type": "application/json" }
                });
                if (res.status === 200) window.location.href = '/';
                else window.location.href = '/profile'
            });
        }
    </script>
</body>

</html>